---
layout: import
title: LUMICKS h5
permalink: /docs/import/lumicks/index.html
---

The company [Lumicks](https://lumicks.com) offers optical tweezers microscopes for high resolution force manipulation of biomolecules. These can include fluorescence imaging options to directly visualize single-molecule dynamics. This repository contains a Fiji/ImageJ2 command that converts from lumicks h5 format to Mars Molecule Archive format. Currently, the importer has been developed and tested with a typical two-bead optical tweezing experiment without fluorescence imaging.

### Usage

The lumicks h5 import command can be installed in Fiji by activating the [Mars update site](https://duderstadt-lab.github.io/mars-docs/install/). When Mars is installed and Fiji has been restarted, the Mars submenu should appear at the bottom of the Plugins menu. The lumicks import command can be found under Mars>Import>LUMICKS h5. When started a dialog will show up with a field for entering the path for the LUMICKS h5 file to import and the option to downsample the data. When the checkbox is activated, the Force 1x and Force 2x data is binned and averaged based on the new sampling rate provided. When the conversion process is done, a new Molecule Archive window should appear with the converted dataset.

### Groovy Lumicks h5 import script

For quick editing of the import procedure, a scripts folder with an ImportLumicksH5.groovy script is included in this repository. This script can be used in the Fiji script editor to perform the same import procedure. The script is included to provide the possibility to modify the import fields or structure. The script requires the Mars jars to be installed from the [Mars update site](https://duderstadt-lab.github.io/mars-docs/install/).

### Expected lumicks h5 hierarchy

This lumicks h5 importer was developed based on an optical tweezer experiment in which a nucleic acid tethered between two beads was subjected to different forces. This type of c-trap experiment generates the following h5 structure:

    ?.h5                      # Global fields added as MarsMetadata parameters (Bluelake version, GUID, File format, etc.)
    ├── Calibration               
    │   └── ?                 # Usually a number (e.g. 11 or 40)
    │       ├── Force 1x      # Fields added as MarsMetadata parameters
    │       ├── Force 1y      # Fields added as MarsMetadata parameters
    │       ├── Force 2x      # Fields added as MarsMetadata parameters
    │       ├── Force 2y      # Fields added as MarsMetadata parameters
    │       └── JSON		    # Not imported (duplicate of above?)
    ├── Force HF              
    │   ├── Force 1x          # Bead 1 to molecule table column Force_1x (fields as molecule parameters)
    │   └── Force 2x          # Bead 2 to molecule table column Force_2x (fields as molecule parameters)
    ├── Marker
    │   └── ...               # Marked regions added to molecule record as MarsRegions, highlighted on plots
    ├── Trap position
    │   └── 1X                # added to molecule table column Trap_position_1X

### Comments

Typically the converted Molecule Archive is a bit larger in size than the original h5 file. The data in the Molecule Archives are saved to the same gzipped binary format used in the lumicks h5 files, but an additional Time_(s) column is added to the molecule data table, among other additional fields that result in a larger file size. This is required for Mars workflows in which collection was not performed in linear time.

If you encounter problems, or you discover your data is not supported, please get in touch with us by creating a post on the [Scientific Image Forum](https://forum.image.sc/) tagged with mars and/or with @karlduderstadt mentioned or contact us by email. We would like to improve this importer over time to support images and other data types generated by lumicks microscopes.

Lumicks has also developed many tailored software solutions for working with their data. You can read more about that on their website or check-out their [pylake python library](https://lumicks-pylake.readthedocs.io/en/stable/).

The source code for this importer can be found in the [mars-lumicks](https://github.com/duderstadt-lab/mars-lumicks) repository.

### Acknowledgments

We would like to thank Andreas Walbrun and Professor Matthias Rief ([lab](https://www.rieflab.de)) for providing the sample data used to develop this importer.
